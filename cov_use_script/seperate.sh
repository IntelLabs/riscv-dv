#!/bin/bash

# ??????????????
files_per_folder=500
# ???????
folder_number=1
# ???????
file_count=0

# ????.log?????????
log_files=(*.log)

# ????????.log??,???????
if [ ${#log_files[@]} -eq 0 ]; then
    echo "?????? .log ???"
    exit 1
fi

# ????.log??
for file in "${log_files[@]}"; do
    echo "????: $file"  # ????
    # ???????
    if [[ -f "$file" ]]; then
        # ???????????,??????
        if [ ! -d "folder_$folder_number" ]; then
            echo "?????: folder_$folder_number"  # ????
            mkdir -p "folder_$folder_number"
        fi

        # ??????????
        echo "???? $file ? folder_$folder_number"  # ????
        mv "$file" "folder_${folder_number}/"
        # ???????
        ((file_count++))

        # ????????????????,??????
        if ((file_count >= files_per_folder)); then
            ((folder_number++))
            file_count=0  # ???????
        fi
    else
        echo "??: ?? '$file' ?????????????"  # ????
    fi
done

echo "Log???????"

